<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "SF Pro Display", "SF Pro Icons", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
            background: #f5f5f7;
            color: #1d1d1f;
            overflow: hidden;
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 60px;
        }

        .loading-apple-logo {
            width: 120px;
            height: 148px;
            fill: #fff;
            animation: logoFade 2s ease-in-out;
        }

        .loading-bar-container {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            overflow: hidden;
            opacity: 0;
            animation: barFadeIn 0.5s ease-in-out 0.8s forwards;
        }

        .loading-bar {
            height: 100%;
            background: #fff;
            border-radius: 2px;
            width: 0%;
            animation: barFill 1.2s ease-out 0.8s forwards;
        }

        @keyframes logoFade {
            0% { 
                opacity: 0; 
                transform: scale(0.8);
            }
            50% { 
                opacity: 1; 
                transform: scale(1);
            }
            100% { 
                opacity: 1; 
                transform: scale(1);
            }
        }

        @keyframes barFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes barFill {
            from { width: 0%; }
            to { width: 100%; }
        }

        .main-container {
            opacity: 0;
            transition: opacity 0.8s ease;
        }

        .main-container.visible {
            opacity: 1;
        }

        .nav {
            background: rgba(251, 251, 253, 0.8);
            backdrop-filter: saturate(180%) blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-inner {
            max-width: 1024px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 44px;
            padding: 0 22px;
        }

        .nav-logo {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }

        .apple-logo {
            width: 16px;
            height: 20px;
            fill: #1d1d1f;
        }

        .nav-items {
            display: flex;
            list-style: none;
            gap: 32px;
        }

        .nav-items a {
            color: #1d1d1f;
            text-decoration: none;
            font-size: 12px;
            font-weight: 400;
            transition: opacity 0.3s ease;
        }

        .nav-items a:hover {
            opacity: 0.7;
        }

        .nav-right {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .nav-search, .nav-pumpfun, .nav-ca {
            color: #1d1d1f;
            text-decoration: none;
            font-size: 16px;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: center;
        }

        .nav-pumpfun img {
            width: 15px;
            height: 15px;
            border-radius: 3px;
            object-fit: contain;
            display: block;
        }

        .nav-search:hover, .nav-pumpfun:hover {
            opacity: 0.7;
        }

        .nav-ca {
            font-size: 12px;
            font-weight: 400;
        }

        .main-content {
            min-height: calc(100vh - 44px);
            background: #f5f5f7;
            padding: 60px 22px;
        }

        .ai-terminal {
            max-width: 980px;
            margin: 0 auto;
            text-align: center;
        }

        .terminal-title {
            font-size: 48px;
            line-height: 1.08349;
            font-weight: 600;
            letter-spacing: -0.003em;
            color: #1d1d1f;
            margin-bottom: 15px;
        }

        .terminal-subtitle {
            font-size: 21px;
            line-height: 1.381;
            font-weight: 400;
            letter-spacing: 0.011em;
            color: #86868b;
            margin-bottom: 60px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .model-container {
            width: 100%;
            max-width: 600px;
            height: 400px;
            margin: 0 auto 40px;
            background: #fff;
            border-radius: 18px;
            border: 1px solid #e5e5e7;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .model-placeholder {
            color: #86868b;
            font-size: 17px;
            line-height: 1.47059;
            font-weight: 400;
            letter-spacing: -0.022em;
            position: absolute;
            z-index: 10;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 12px;
            transition: opacity 0.3s ease;
        }

        .model-placeholder.loading {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .chat-interface {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .chat-messages {
            background: #fff;
            border-radius: 18px;
            border: 1px solid #e5e5e7;
            margin-bottom: 20px;
            max-height: 200px;
            overflow-y: auto;
            padding: 20px;
            display: none;
        }

        .chat-messages.visible {
            display: block;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 80%;
            animation: slideIn 0.3s ease;
        }

        .message.user {
            background: #007aff;
            color: white;
            margin-left: auto;
        }

        .message.assistant {
            background: #f2f2f7;
            color: #1d1d1f;
            margin-right: auto;
        }

        .message.loading {
            background: #f2f2f7;
            color: #86868b;
            margin-right: auto;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #86868b;
            animation: typingDots 1.4s infinite ease-in-out;
        }

        .typing-dots span:nth-child(1) { animation-delay: 0s; }
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingDots {
            0%, 60%, 100% { opacity: 0.3; transform: scale(0.8); }
            30% { opacity: 1; transform: scale(1); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-input-container {
            position: relative;
            background: #fff;
            border-radius: 24px;
            border: 1px solid #e5e5e7;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .chat-input-container:focus-within {
            border-color: #007aff;
            box-shadow: 0 2px 20px rgba(0, 122, 255, 0.2);
        }

        .chat-input {
            width: 100%;
            padding: 16px 60px 16px 20px;
            border: none;
            outline: none;
            font-family: "SF Pro Display", "SF Pro Icons", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
            font-size: 17px;
            line-height: 1.47059;
            font-weight: 400;
            letter-spacing: -0.022em;
            color: #1d1d1f;
            background: transparent;
            resize: none;
            min-height: 24px;
            max-height: 120px;
        }

        .chat-input::placeholder {
            color: #86868b;
        }

        .send-button {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 36px;
            height: 36px;
            background: #007aff;
            border: none;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .send-button:hover {
            background: #0051d5;
            transform: translateY(-50%) scale(1.05);
        }

        .send-button:active {
            transform: translateY(-50%) scale(0.95);
        }

        .send-button:disabled {
            background: #86868b;
            cursor: not-allowed;
            transform: translateY(-50%);
        }

        .send-button svg {
            width: 16px;
            height: 16px;
            fill: #fff;
        }

        .status-text {
            margin-top: 20px;
            font-size: 14px;
            line-height: 1.42857;
            font-weight: 400;
            letter-spacing: -0.016em;
            color: #86868b;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background: #34c759;
            border-radius: 50%;
            animation: breathe 2s infinite;
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        @media (max-width: 768px) {
            .nav-items {
                display: none;
            }
            
            .terminal-title {
                font-size: 36px;
            }
            
            .model-container {
                height: 300px;
                max-width: 100%;
            }

            .loading-content {
                gap: 50px;
            }

            .loading-apple-logo {
                width: 100px;
                height: 124px;
            }

            .loading-bar-container {
                width: 160px;
            }
        }

        .info-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .info-modal.visible {
            display: flex;
        }

        .info-modal-content {
            background: #fff;
            border-radius: 18px;
            border: 1px solid #e5e5e7;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 40px;
            text-align: center;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .info-modal-title {
            font-size: 28px;
            line-height: 1.14286;
            font-weight: 600;
            letter-spacing: 0.007em;
            color: #1d1d1f;
            margin-bottom: 20px;
        }

        .info-modal-text {
            font-size: 17px;
            line-height: 1.47059;
            font-weight: 400;
            letter-spacing: -0.022em;
            color: #86868b;
            margin-bottom: 30px;
            min-height: 50px;
            white-space: pre-line;
            text-align: left;
        }

        .info-modal-text.typing::after {
            content: '|';
            animation: blink 1s infinite;
            color: #007aff;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .info-modal-close {
            background: #007aff;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            font-family: "SF Pro Display", "SF Pro Icons", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
            font-size: 17px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .info-modal-close:hover {
            background: #0051d5;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <svg class="loading-apple-logo" viewBox="0 0 814 1000">
                <path d="M788.1 340.9c-5.8 4.5-108.2 62.2-108.2 190.5 0 148.4 130.3 200.9 134.2 202.2-.6 3.2-20.7 71.9-68.7 141.9-42.8 61.6-87.5 123.1-155.5 123.1s-85.5-39.5-164-39.5c-76.5 0-103.7 40.8-165.9 40.8s-105.6-57-155.5-127C46.7 790.7 0 663 0 541.8c0-194.4 126.4-297.5 250.8-297.5 65.6 0 120.5 43.9 162.2 43.9 40.8 0 103.9-47.18 180.8-47.18 29.6 0 137.3 2.64 186.8 99.64zm-144.4-268.3c35.2-42.5 58.9-101.4 58.9-160.4 0-8.2-.9-16.4-2.6-23.5-56.3 2.6-124.7 37.4-165.8 85.7-33.8 39.2-65.6 101.4-65.6 160.9 0 9.1.9 18.3 1.5 21.1 2.6.6 6.7.9 10.9.9 50.3 0 114.8-33.8 162.7-84.7z"/>
            </svg>
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
            </div>
        </div>
    </div>

    <div class="main-container" id="mainContainer">
        <nav class="nav">
            <div class="nav-inner">
                <a href="#" class="nav-logo">
                    <svg class="apple-logo" viewBox="0 0 814 1000">
                        <path d="M788.1 340.9c-5.8 4.5-108.2 62.2-108.2 190.5 0 148.4 130.3 200.9 134.2 202.2-.6 3.2-20.7 71.9-68.7 141.9-42.8 61.6-87.5 123.1-155.5 123.1s-85.5-39.5-164-39.5c-76.5 0-103.7 40.8-165.9 40.8s-105.6-57-155.5-127C46.7 790.7 0 663 0 541.8c0-194.4 126.4-297.5 250.8-297.5 65.6 0 120.5 43.9 162.2 43.9 40.8 0 103.9-47.18 180.8-47.18 29.6 0 137.3 2.64 186.8 99.64zm-144.4-268.3c35.2-42.5 58.9-101.4 58.9-160.4 0-8.2-.9-16.4-2.6-23.5-56.3 2.6-124.7 37.4-165.8 85.7-33.8 39.2-65.6 101.4-65.6 160.9 0 9.1.9 18.3 1.5 21.1 2.6.6 6.7.9 10.9.9 50.3 0 114.8-33.8 162.7-84.7z"/>
                    </svg>
                </a>
                <ul class="nav-items">
                    <li><a href="#" onclick="showInfoModal('vision')">Vision</a></li>
                    <li><a href="#" onclick="showInfoModal('companion')">Companion</a></li>
                    <li><a href="#" onclick="showInfoModal('support')">Support</a></li>
                </ul>
                <div class="nav-right">
                    <a href="#" class="nav-pumpfun">
                        <img src="./pump.fun.png" alt="pump.fun" width="15" height="15" style="border-radius: 3px; object-fit: contain;">
                    </a>
                    <a href="#" class="nav-search">
                        <svg width="15" height="15" viewBox="0 0 300 300" fill="none">
                            <path d="M178.57 127.15 290.27 0h-26.46l-97.03 110.38L89.34 0H0l117.13 166.93L0 300.25h26.46l102.4-116.59 81.8 116.59H300M36.01 19.54H76.66l187.13 262.13h-40.66" fill="#1d1d1f"/>
                        </svg>
                    </a>
                    <span class="nav-ca">CA:</span>
                </div>
            </div>
        </nav>

        <main class="main-content">
            <section class="ai-terminal">
                <h1 class="terminal-title">iCompanion</h1>
                <p class="terminal-subtitle">Experience the future of personal intelligence. Your iCompanion is ready to assist.</p>
                
                <div class="model-container" id="modelContainer">
                    <p class="model-placeholder">3D iCompanion Model will load here</p>
                </div>
                
                <div class="chat-interface">
                    <div class="chat-messages" id="chatMessages"></div>
                    
                    <div class="chat-input-container">
                        <textarea 
                            class="chat-input" 
                            placeholder="Ask your iCompanion anything..."
                            rows="1"
                            id="chatInput"
                        ></textarea>
                        <button class="send-button" id="sendButton">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    
                    <div class="status-text">
                        <div class="status-indicator"></div>
                        Ready to help • Privacy protected
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div class="info-modal" id="infoModal">
        <div class="info-modal-content">
            <h2 class="info-modal-title" id="modalTitle">Title</h2>
            <p class="info-modal-text" id="modalText">Description text goes here.</p>
            <button class="info-modal-close" onclick="closeInfoModal()">Close</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script>
        window.addEventListener('load', function() {
            setTimeout(() => {
                const loadingScreen = document.getElementById('loadingScreen');
                const mainContainer = document.getElementById('mainContainer');
                
                loadingScreen.classList.add('hidden');
                
                setTimeout(() => {
                    mainContainer.classList.add('visible');
                    document.body.style.overflow = 'auto';
                    initThreeJS();
                }, 200);
                
            }, 2000);
        });

        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const chatMessages = document.getElementById('chatMessages');
        
        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });
        
        function addMessage(content, isUser = false) {
            const message = document.createElement('div');
            message.className = `message ${isUser ? 'user' : 'assistant'}`;
            message.textContent = content;
            
            chatMessages.appendChild(message);
            chatMessages.classList.add('visible');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        async function callAnthropicAPI(userMessage) {
            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: userMessage
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }
                
                const data = await response.json();
                return data.response;
                
            } catch (error) {
                console.error('Error calling API:', error);
                return 'Sorry, I\'m having trouble connecting right now. Please try again.';
            }
        }
        
        async function sendMessage() {
            const message = chatInput.value.trim();
            if (message && !sendButton.disabled) {
                addMessage(message, true);
                chatInput.value = '';
                chatInput.style.height = 'auto';
                
                sendButton.disabled = true;
                
                const loadingMessage = document.createElement('div');
                loadingMessage.className = 'message loading';
                loadingMessage.innerHTML = '<div class="typing-dots"><span></span><span></span><span></span></div>';
                chatMessages.appendChild(loadingMessage);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                try {
                    const response = await callAnthropicAPI(message);
                    loadingMessage.remove();
                    addMessage(response, false);
                } catch (error) {
                    loadingMessage.remove();
                    addMessage('Sorry, I\'m having trouble connecting right now. Please try again.', false);
                }
                
                sendButton.disabled = false;
            }
        }
        
        sendButton.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        let typewriterTimeout;
        
        function typewriterEffect(element, text, speed = 15) {
            if (typewriterTimeout) {
                clearTimeout(typewriterTimeout);
            }
            
            element.innerHTML = '';
            element.textContent = '';
            element.classList.remove('typing');
            
            setTimeout(() => {
                element.classList.add('typing');
                let i = 0;
                
                function type() {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                        typewriterTimeout = setTimeout(type, speed);
                    } else {
                        element.classList.remove('typing');
                        typewriterTimeout = null;
                    }
                }
                type();
            }, 10);
        }
        
        function closeInfoModal() {
            if (typewriterTimeout) {
                clearTimeout(typewriterTimeout);
                typewriterTimeout = null;
            }
            
            const modal = document.getElementById('infoModal');
            const text = document.getElementById('modalText');
            
            text.innerHTML = '';
            text.textContent = '';
            text.classList.remove('typing');
            
            modal.classList.remove('visible');
        }
        
        function showInfoModal(type) {
            const modal = document.getElementById('infoModal');
            const title = document.getElementById('modalTitle');
            const text = document.getElementById('modalText');
            
            let description = '';
            
            switch(type) {
                case 'vision':
                    title.textContent = 'Vision';
                    description = 'We believe technology should feel magical.\n\nToday, you\'re experiencing the beginning of something extraordinary. Your iCompanion is learning, evolving, becoming more personal with every interaction.\n\nNext year, we\'re excited to share a new chapter—one that brings intelligence into the physical world in ways we\'ve never imagined possible. We think you\'re going to love what we\'ve been working on.\n\nAnd this is just the start. We\'re developing capabilities that will fundamentally change how you live, work, and connect with the world around you. Technologies so advanced, we\'re not ready to talk about them yet.\n\nAt Apple, we don\'t just build products. We create experiences that enrich lives and unlock human potential.\n\nThe future of personal intelligence isn\'t just coming. It\'s already here, waiting to unfold.\n\nStay tuned.';
                    break;
                case 'companion':
                    title.textContent = 'iCompanion';
                    description = 'Meet your new reality. iCompanion isn\'t just AI—it\'s the most advanced personal intelligence Apple has ever created.\n\nWatch as your iCompanion uses Face ID to instantly recognize family members, seamlessly AirDrops photos to your iPhone while you\'re talking about them, and activates HomeKit scenes by reading your mood. It mirrors your Mac screen for presentations, starts AirPlay to your Apple TV before you reach for the remote, and syncs perfectly with your Apple Watch health data to suggest the perfect Focus mode.\n\nSee it analyze your Screen Time patterns, automatically create Shortcuts for your daily routines, and use Continuity to hand off tasks between all your devices. With deep Spotlight integration, it finds any file across your entire Apple ecosystem in milliseconds. It even uses your AirPods\' spatial audio to create immersive soundscapes that match your environment.\n\nPowered by Apple\'s breakthrough M-series Neural Engine and exclusive Spatial Intelligence technology, iCompanion creates a living bridge between iPhone, iPad, Mac, Apple Watch, Apple TV, and HomePod. It doesn\'t just respond—it anticipates with Apple Intelligence.\n\nExclusive beta program launches soon. Full release 2027.\n\nThis is personal intelligence, perfected. This is what happens when Apple reimagines AI from the ground up. Your life, but effortlessly orchestrated.';
                    break;
                case 'support':
                    title.textContent = 'Support';
                    description = 'Need help with your iCompanion?\n\nOur support team is here to assist you 24/7. Whether you\'re experiencing technical difficulties, need setup assistance, or have questions about privacy and security, we\'re here to help.\n\nContact Methods:\n• Live Chat: Available instantly through your iCompanion interface\n• Phone Support: 1-800-APL-CARE (275-2273)\n• Genius Bar: Schedule an appointment at your local Apple Store\n• Online Resources: support.apple.com/icompanion\n\nCommon Solutions:\n• Restart your iCompanion by saying "Hey Siri, restart iCompanion"\n• Check your internet connection for optimal performance\n• Ensure all Apple devices are signed into the same Apple ID\n• Update to the latest software versions across all devices\n\nPrivacy & Security:\nYour conversations with iCompanion are processed using on-device intelligence and Apple\'s Private Cloud Compute. Personal data never leaves your ecosystem without explicit permission.\n\nFor enterprise customers, dedicated business support is available through Apple Business Essentials.\n\nYour privacy. Our priority. Always.';
                    break;
            }
            
            modal.classList.add('visible');
            typewriterEffect(text, description);
        }
        
        document.getElementById('infoModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeInfoModal();
            }
        });
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeInfoModal();
            }
        });
        
        const modelContainer = document.getElementById('modelContainer');
        let scene, camera, renderer, robot, mixer;
        
        function initThreeJS() {
            console.log('Initializing Three.js...');
            
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xffffff);
            
            camera = new THREE.PerspectiveCamera(75, 600/400, 0.1, 1000);
            camera.position.set(0, 0, 3.2);
            camera.lookAt(0, 0, 0);
            
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(600, 400);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 10, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            modelContainer.innerHTML = '';
            modelContainer.appendChild(renderer.domElement);
            
            const loadingText = document.createElement('p');
            loadingText.className = 'model-placeholder';
            loadingText.textContent = 'Loading robot model...';
            loadingText.style.position = 'absolute';
            loadingText.style.top = '50%';
            loadingText.style.left = '50%';
            loadingText.style.transform = 'translate(-50%, -50%)';
            loadingText.style.zIndex = '10';
            modelContainer.style.position = 'relative';
            modelContainer.appendChild(loadingText);
            
            console.log('Loading robot.glb...');
            const loader = new THREE.GLTFLoader();
            
            loader.load(
                './robot.glb',
                function(gltf) {
                    console.log('GLB loaded successfully!', gltf);
                    
                    if (loadingText) loadingText.remove();
                    
                    robot = gltf.scene;
                    
                    robot.scale.set(4, 4, 4);
                    robot.position.set(0, -1.8, 0);
                    
                    robot.traverse(function(child) {
                        if (child.isMesh) {
                            child.castShadow = true;
                            child.receiveShadow = true;
                        }
                    });
                    
                    scene.add(robot);
                    console.log('Robot added to scene');
                    
                    if (gltf.animations && gltf.animations.length > 0) {
                        console.log('Found animations:', gltf.animations.length);
                        mixer = new THREE.AnimationMixer(robot);
                        const action = mixer.clipAction(gltf.animations[0]);
                        action.play();
                    }
                    
                    animate();
                },
                function(progress) {
                    const percentage = Math.round((progress.loaded / progress.total) * 100);
                    console.log('Loading progress:', percentage + '%');
                    if (loadingText) {
                        loadingText.textContent = `Loading robot model... ${percentage}%`;
                    }
                },
                function(error) {
                    console.error('Error loading GLB file:', error);
                    if (loadingText) {
                        loadingText.textContent = 'Error: Could not load robot.glb. Check console for details.';
                        loadingText.style.color = '#ff3b30';
                    }
                }
            );
            
            function animate() {
                requestAnimationFrame(animate);
                
                if (mixer) {
                    mixer.update(0.016);
                }
                
                if (robot) {
                    robot.rotation.y += 0.01;
                }
                
                renderer.render(scene, camera);
            }
        }
        
        window.addEventListener('resize', function() {
            if (camera && renderer) {
                camera.aspect = 600 / 400;
                camera.updateProjectionMatrix();
                renderer.setSize(600, 400);
            }
        });
    </script>
</body>
</html>
